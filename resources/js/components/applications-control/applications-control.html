<form class="mb-3" ng-submit="$ctrl.filter()">

    <div class="form-row">

        <div class="col-3">
            <input type="text"
                   class="form-control"
                   placeholder="Пользователь"
                   ng-model="$ctrl.user">
        </div>

        <div class="col-3">
            <select ng-model="$ctrl.status" class="form-control">
                <option value="">Выберите статус</option>
                <option value="opened">Открытые</option>
                <option value="published">На рассмотрении</option>
                <option value="closed">Закрытые</option>
            </select>
        </div>

        <div class="col-auto">
            <button type="submit" class="btn btn-primary" ng-disabled="$ctrl.loading">Поиск</button>
            <button type="button" class="btn btn-secondary" ng-click="$ctrl.reset()">Сбросить</button>
        </div>

    </div>

</form>

<div class="mb-3 clearfix">

    <div class="float-left">
        Всего: <b>{{ $ctrl.total }}</b> {{ $ctrl.total | plural : ['программа', 'программы', 'программ'] }}
    </div>

    <a href="" ng-click="$ctrl.openCreateModal()" class="btn btn-primary float-right">
        Добавить программу
    </a>

</div>


<table class="table bg-white" style="font-size: 14px">
    <thead class="thead-light">
    <tr>
        <th>Id</th>
        <th>Пользователь</th>
        <th>Тип</th>
        <th>Название</th>
        <th>Дата отправки</th>
        <th>Статус</th>
        <th>Ответственный</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="app in $ctrl.applications track by $index">
        <td>{{app.id}}</td>
        <td>{{app.user.full_name}}</td>
        <td>{{app.entity_model}}</td>
        <td>{{app.entity.title}}</td>
        <td>{{app.created_at | amDateFormat : 'DD.MM.YYYY HH:mm'}}</td>
        <td ng-switch="app.status">
            <div class="badge badge-info" ng-switch-when="process">Новая</div>
        </td>
        <td>
            <div ng-if="!app.manager">не назначен</div>
            <div ng-if="app.manager">{{app.manager.name}}</div>
        </td>
        <td class="text-center">
            <a href="" ng-href="/control-panel/applications/{{app.id}}">открыть</a>
        </td>
    </tr>
    </tbody>
</table>